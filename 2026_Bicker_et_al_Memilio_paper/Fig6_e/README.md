# Figure 6e: GNN vs. ODE Runtime Scaling

## Requirements

- **MEmilio**: See `git_tag.cmake` for the required version.
- **Python**: Required for running the benchmark and plotting results.
  - Dependencies: `tensorflow`, `spektral`, `pandas`, `numpy`, `matplotlib`.

## Files

- **Simulation/Benchmark**:
    - `measure_gnn_graphODE_runtime.py`: Python script that measures the runtime of the GNN surrogate model compared to the Graph-ODE reference implementation across different batch sizes and simulation durations.
- **Plotting**:
    - `plot_6e.py`: Generates the runtime scaling plot (Fig. 6e) using the data generated by the benchmark script.

The files described above can be found under `https://github.com/SciCompMod/memilio/tree/1139-introduce-improved-gnn-surrogate-models`.

The pre-trained model weights for the GNN surrogate used in the benchmarks are available on Zenodo at [https://doi.org/10.5281/zenodo.18507331](https://doi.org/10.5281/zenodo.18507331).

## How to Run

1.  **Install the project**:
    Configure the project using CMake. This will create a virtual environment and install the necessary packages (including `memilio-simulation` and `memilio-surrogatemodel`).

2.  **Run Benchmark**:
    Execute the Python benchmark script to generate the runtime data (`measurements_gnn_vs_ode.csv`).
    ```bash
    source build/venv/bin/activate
    python measure_gnn_graphODE_runtime.py
    ```

3.  **Generate Plots**:
    Use the plotting script to visualize the results:
    ```bash
    python3 plot_6e.py
    ```
    This will save the figures (PDF/PNG) to the configured output directory.
    Note: This script uses the general configuration file `plotting_settings.py` located in the parent folder.
